
> trueflow-landing@1.0.0 dev
> next dev -p 3001

  ▲ Next.js 14.2.30
  - Local:        http://localhost:3001
  - Environments: .env.local

 ✓ Starting...
 ✓ Ready in 1270ms
 ○ Compiling / ...
 ✓ Compiled / in 1280ms (597 modules)
 HEAD / 200 in 1589ms
 ✓ Compiled in 318ms (308 modules)
 ✓ Compiled /api/ghl/create-lead-complete in 251ms (374 modules)
[API Complete] ===== NEW COMPLETE FIELD MAPPING REQUEST =====
[API Complete] Starting comprehensive field mapping process...
[API Complete] Form data received: {
  firstName: 'Array',
  lastName: 'Format Test',
  email: 'array.format.test.1753899752049@example.com',
  businessName: 'Array Formatting Test Company',
  businessType: 'Agency',
  teamSize: '11-25',
  monthlyLeads: '101-500',
  currentTools: [ 'HubSpot', 'Salesforce', 'Mailchimp', 'Hootsuite', 'Buffer' ],
  biggestChallenge: 'Scaling Operations',
  contentGoals: [
    'Email Newsletters',
    'Blog Posts',
    'Social Media Content',
    'Video Scripts',
    'Sales Materials'
  ],
  selectedPlan: 'content-engine',
  additionalNotes: undefined,
  formFieldCount: 25
}
[API Complete] Detected form type: assessment
[API Complete] Lead score: 85, quality: hot
[API Complete] Ensuring all form fields exist in GoHighLevel...
[Field Setup] Ensuring all Get Started form fields exist in GHL...
[Field Setup] Found 86 existing custom fields
[Field Setup] ❌ Field missing: Current Content Creation Method, creating...
[Field Creation] Creating custom field: Current Content Creation Method
[Field Creation] Failed to create field Current Content Creation Method: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"2c71fa13-c3f9-45b6-a733-bbd4b7e57968"}
[Field Setup] ❌ Field missing: Monthly Content Volume, creating...
[Field Creation] Creating custom field: Monthly Content Volume
[Field Creation] Failed to create field Monthly Content Volume: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"56f8081f-ff86-4b66-bf46-74888912833c"}
[Field Setup] ❌ Field missing: CRM Usage Level, creating...
[Field Creation] Creating custom field: CRM Usage Level
[Field Creation] Failed to create field CRM Usage Level: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"0e5f2ff3-e7a7-4d76-b451-df68052fd32c"}
[Field Setup] ✅ Field exists: Lead Response Time (contact.trueflow_lead_response)
[Field Setup] ❌ Field missing: Weekly Time on Repetitive Tasks, creating...
[Field Creation] Creating custom field: Weekly Time on Repetitive Tasks
[Field Creation] Failed to create field Weekly Time on Repetitive Tasks: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"2433c8ea-039c-46d6-a33b-af0e70839f75"}
[Field Setup] ❌ Field missing: Monthly Budget Range, creating...
[Field Creation] Creating custom field: Monthly Budget Range
[Field Creation] Failed to create field Monthly Budget Range: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"30c5fb61-5017-4d75-91dc-10ac154f96ea"}
[Field Setup] ✅ Field exists: How many team/staff members do you have? (contact.how_many_team_staff_members_do_you_have)
[Field Setup] ✅ Field exists: Estimated total number of new leads per month (contact.estimated_total_number_of_new_leads_per_month)
[Field Setup] ✅ Field exists: Which of the following do you currently use? (contact.which_of_the_following_do_you_currently_use)
[Field Setup] ✅ Field exists: Where are you still experiencing friction? (Choose your biggest challenge or type your own.) (contact.where_are_you_still_experiencing_friction_choose_your_biggest_challenge_or_type_your_own)
[Field Setup] ❌ Field missing: Current revenue range? (We don't need exact numbers—just a ballpark.), creating...
[Field Creation] Creating custom field: Current revenue range? (We don't need exact numbers—just a ballpark.)
[Field Creation] Failed to create field Current revenue range? (We don't need exact numbers—just a ballpark.): {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"1406abc9-4c2e-4daa-8714-46af3fd3aa08"}
[Field Setup] ✅ Field exists: What are your goals? (contact.what_are_your_goals)
[Field Setup] ❌ Field missing: Current Systems, creating...
[Field Creation] Creating custom field: Current Systems
[Field Creation] Failed to create field Current Systems: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"e7dbe26d-275f-4e7e-9c0d-a13db7e66770"}
[Field Setup] ❌ Field missing: Lead Sources, creating...
[Field Creation] Creating custom field: Lead Sources
[Field Creation] Failed to create field Lead Sources: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"8bc703c4-e324-48e5-a122-9aba0f5ddd76"}
[Field Setup] ✅ Field exists: Integration Preferences (contact.trueflow_integrations)
[Field Setup] ✅ Field exists: Additional Notes (contact.additional_notes)
[Field Setup] ❌ Field missing: How Did You Hear About Us, creating...
[Field Creation] Creating custom field: How Did You Hear About Us
[Field Creation] Failed to create field How Did You Hear About Us: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"b5d3797d-dd19-47ae-99d7-88794f065c4e"}
[Field Setup] ❌ Field missing: Urgency Level, creating...
[Field Creation] Creating custom field: Urgency Level
[Field Creation] Failed to create field Urgency Level: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"ff5f6a73-75b8-4462-8955-1e1e4c9c7440"}
[Field Setup] ✅ Field exists: Assessment Total Score (contact.assessment_total_score)
[Field Setup] ✅ Field exists: Assessment Score Percentage (contact.assessment_score_percentage)
[Field Setup] ❌ Field missing: AI Readiness Level, creating...
[Field Creation] Creating custom field: AI Readiness Level
[Field Creation] Failed to create field AI Readiness Level: {"message":"contact.ai_readiness_level already exists. Please input a different name or fieldKey.","error":"Bad Request","statusCode":400,"traceId":"a24d40f7-c1d5-4cd9-8926-e00a03adfd34"}
[Field Setup] ✅ Field exists: AI Recommendation (contact.ai_recommendation)
[Field Setup] Field setup complete. Total fields mapped: 97
[API Complete] Field mapping complete. Available fields: 97
[API Complete] Building comprehensive custom fields payload...
[Complete Mapping] Building complete custom fields payload...
[Complete Mapping] ✅ Mapped businessName: Array Formatting Test Company
[Complete Mapping] ✅ Mapped businessType: Agency
[Complete Mapping] ✅ Mapped contentGoals: Email Newsletters, Blog Posts, Social Media Conten
[Complete Mapping] ✅ Mapped selectedPlan: content-engine
[Complete Mapping] ✅ Mapped leadScore: 85
[Complete Mapping] ✅ Mapped leadQuality: hot
[Complete Mapping] ✅ Mapped submissionDate: 2025-07-30T18:22:32.416Z
[Complete Mapping] ✅ Mapped assessment lead-response: quick
[Complete Mapping] ✅ Mapped teamSize (How many team/staff members do you have?): 11-25
[Complete Mapping] ✅ Mapped monthlyLeads (Estimated total number of new leads per month): 101-500
[Complete Mapping] ✅ Mapped currentTools (Which of the following do you currently use?): HubSpot, Salesforce, Mailchimp, Hootsuite, Buffer
[Complete Mapping] ✅ Mapped biggestChallenge (Where are you still experiencing friction? (Choose your biggest challenge or type your own.)): Scaling Operations
[Complete Mapping] ✅ Mapped businessGoals (What are your goals?): Streamline operations and scale content creation e
[Complete Mapping] ❌ Field not found for currentSystems (Current Systems)
[Complete Mapping] ❌ Field not found for leadSources (Lead Sources)
[Complete Mapping] ✅ Mapped integrations (Integration Preferences): GoHighLevel, Mailchimp, HubSpot, Zapier
[Complete Mapping] ✅ Mapped totalScore (Assessment Total Score): 85
[Complete Mapping] ✅ Mapped scorePercentage (Assessment Score Percentage): 85
[Complete Mapping] ❌ Field not found for readinessLevel (AI Readiness Level)
[Complete Mapping] ✅ Mapped recommendation (AI Recommendation): Your business shows strong AI readiness
[Complete Mapping] Total custom fields mapped: 17
[API Complete] Built 17 custom field mappings
[API Complete] Custom fields being sent to GHL:
[API Complete]   1. undefined: "Array Formatting Test Company"
[API Complete]   2. undefined: "Agency"
[API Complete]   3. undefined: "Email Newsletters, Blog Posts, Social Media Content, Video Scripts, Sales Materials"
[API Complete]   4. undefined: "content-engine"
[API Complete]   5. undefined: "85"
[API Complete]   6. undefined: "hot"
[API Complete]   7. undefined: "2025-07-30T18:22:32.416Z"
[API Complete]   8. undefined: "quick"
[API Complete]   9. undefined: "11-25"
[API Complete]   10. undefined: "101-500"
[API Complete]   11. undefined: "HubSpot, Salesforce, Mailchimp, Hootsuite, Buffer"
[API Complete]   12. undefined: "Scaling Operations"
[API Complete]   13. undefined: "Streamline operations and scale content creation efficiently"
[API Complete]   14. undefined: "GoHighLevel, Mailchimp, HubSpot, Zapier"
[API Complete]   15. undefined: "85"
[API Complete]   16. undefined: "85"
[API Complete]   17. undefined: "Your business shows strong AI readiness"
[API Complete] Using minimal tags: [ 'web-lead', 'assessment-form' ]
[API Complete] Sending comprehensive payload to GHL: {
  name: 'Array Format Test',
  email: 'array.format.test.1753899752049@example.com',
  companyName: 'Array Formatting Test Company',
  source: 'TrueFlow Assessment Form (Complete)',
  tagsCount: 2,
  customFieldsCount: 17,
  payloadSize: 1548
}
[API Complete] Contact created/updated successfully: { contactId: 'JSqjBXwKwn6tcyQeP2e5', hasContact: true, hasId: false }
[API Complete] Sending backup email notification...
[Email] Sending assessment notification...
[API Complete] Backup email failed: Error: Unable to connect to Resend API
    at sendAssessmentNotification (webpack-internal:///(rsc)/./lib/email/resend-notifications.ts:36:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async POST (webpack-internal:///(rsc)/./app/api/ghl/create-lead-complete/route.ts:204:17)
    at async /Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/start-server.js:141:13)
[API Complete] ===== COMPLETE FIELD MAPPING SUCCESSFUL =====
 POST /api/ghl/create-lead-complete 200 in 4303ms
 ✓ Compiled in 18ms
 ✓ Compiled /api/ghl/create-lead-complete in 103ms (114 modules)
[API Complete] ===== NEW COMPLETE FIELD MAPPING REQUEST =====
[API Complete] Starting comprehensive field mapping process...
[API Complete] Form data received: {
  firstName: 'Minimal',
  lastName: 'Fields Test',
  email: 'minimal.fields.1753900950565@example.com',
  businessName: 'Minimal Fields Test Co',
  businessType: 'Agency',
  teamSize: '',
  monthlyLeads: '',
  currentTools: [],
  biggestChallenge: '',
  contentGoals: [ 'Email Newsletters', 'Blog Posts' ],
  selectedPlan: '',
  additionalNotes: '',
  formFieldCount: 20
}
[API Complete] Detected form type: get-started
[API Complete] Lead score: 65, quality: warm
[API Complete] Ensuring all form fields exist in GoHighLevel...
[Field Setup] Ensuring all Get Started form fields exist in GHL...
[Field Setup] Found 86 existing custom fields
[Field Setup] ❌ Field missing: Current Content Creation Method, creating...
[Field Creation] Creating custom field: Current Content Creation Method
[Field Creation] Failed to create field Current Content Creation Method: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"b855852b-f679-42b3-aeb9-b51c795e6521"}
[Field Setup] ❌ Field missing: Monthly Content Volume, creating...
[Field Creation] Creating custom field: Monthly Content Volume
[Field Creation] Failed to create field Monthly Content Volume: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"5c5e7e99-6980-4aff-860a-864765aefbd4"}
[Field Setup] ❌ Field missing: CRM Usage Level, creating...
[Field Creation] Creating custom field: CRM Usage Level
[Field Creation] Failed to create field CRM Usage Level: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"310eae7a-e0e5-4d4c-b420-3d02be1dff96"}
[Field Setup] ✅ Field exists: Lead Response Time (contact.trueflow_lead_response)
[Field Setup] ❌ Field missing: Weekly Time on Repetitive Tasks, creating...
[Field Creation] Creating custom field: Weekly Time on Repetitive Tasks
[Field Creation] Failed to create field Weekly Time on Repetitive Tasks: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"a19f5501-9428-486b-8235-c021dcba9c92"}
[Field Setup] ❌ Field missing: Monthly Budget Range, creating...
[Field Creation] Creating custom field: Monthly Budget Range
[Field Creation] Failed to create field Monthly Budget Range: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"b4b82b1f-8f15-4a8d-89c6-f635056a8899"}
[Field Setup] ✅ Field exists: How many team/staff members do you have? (contact.how_many_team_staff_members_do_you_have)
[Field Setup] ✅ Field exists: Estimated total number of new leads per month (contact.estimated_total_number_of_new_leads_per_month)
[Field Setup] ✅ Field exists: Which of the following do you currently use? (contact.which_of_the_following_do_you_currently_use)
[Field Setup] ✅ Field exists: Where are you still experiencing friction? (Choose your biggest challenge or type your own.) (contact.where_are_you_still_experiencing_friction_choose_your_biggest_challenge_or_type_your_own)
[Field Setup] ❌ Field missing: Current revenue range? (We don't need exact numbers—just a ballpark.), creating...
[Field Creation] Creating custom field: Current revenue range? (We don't need exact numbers—just a ballpark.)
[Field Creation] Failed to create field Current revenue range? (We don't need exact numbers—just a ballpark.): {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"3d54988a-e3bb-4022-b4fb-dc397914b849"}
[Field Setup] ✅ Field exists: What are your goals? (contact.what_are_your_goals)
[Field Setup] ❌ Field missing: Current Systems, creating...
[Field Creation] Creating custom field: Current Systems
[Field Creation] Failed to create field Current Systems: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"c5c14e96-bef9-4d15-a1a5-49681aed71d9"}
[Field Setup] ❌ Field missing: Lead Sources, creating...
[Field Creation] Creating custom field: Lead Sources
[Field Creation] Failed to create field Lead Sources: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"3e0fcacf-4580-4651-a565-22041f9cb397"}
[Field Setup] ✅ Field exists: Integration Preferences (contact.trueflow_integrations)
[Field Setup] ✅ Field exists: Additional Notes (contact.additional_notes)
[Field Setup] ❌ Field missing: How Did You Hear About Us, creating...
[Field Creation] Creating custom field: How Did You Hear About Us
[Field Creation] Failed to create field How Did You Hear About Us: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"3390feba-a532-46ac-b35c-7fe55ba21f62"}
[Field Setup] ❌ Field missing: Urgency Level, creating...
[Field Creation] Creating custom field: Urgency Level
[Field Creation] Failed to create field Urgency Level: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"c87cfccb-773b-4aec-90d1-2be434f4e55a"}
[Field Setup] ✅ Field exists: Assessment Total Score (contact.assessment_total_score)
[Field Setup] ✅ Field exists: Assessment Score Percentage (contact.assessment_score_percentage)
[Field Setup] ❌ Field missing: AI Readiness Level, creating...
[Field Creation] Creating custom field: AI Readiness Level
[Field Creation] Failed to create field AI Readiness Level: {"message":"contact.ai_readiness_level already exists. Please input a different name or fieldKey.","error":"Bad Request","statusCode":400,"traceId":"6742671e-ea1c-45d0-9c6d-8dab92bc2134"}
[Field Setup] ✅ Field exists: AI Recommendation (contact.ai_recommendation)
[Field Setup] Field setup complete. Total fields mapped: 97
[API Complete] Field mapping complete. Available fields: 97
[API Complete] Building comprehensive custom fields payload...
[Complete Mapping] Building complete custom fields payload...
[Complete Mapping] ✅ Mapped businessName: Minimal Fields Test Co
[Complete Mapping] ✅ Mapped businessType: Agency
[Complete Mapping] ✅ Mapped contentGoals: Email Newsletters, Blog Posts
[Complete Mapping] ✅ Mapped leadScore: 65
[Complete Mapping] ✅ Mapped leadQuality: warm
[Complete Mapping] ✅ Mapped submissionDate: 2025-07-30T18:42:30.776Z
[Complete Mapping] ❌ Field not found for currentSystems (Current Systems)
[Complete Mapping] ❌ Field not found for leadSources (Lead Sources)
[Complete Mapping] ✅ Mapped integrations (Integration Preferences): GoHighLevel, Zapier
[Complete Mapping] Total custom fields mapped: 7
[API Complete] Built 7 custom field mappings
[API Complete] Custom fields being sent to GHL:
[API Complete]   1. undefined: "Minimal Fields Test Co"
[API Complete]   2. undefined: "Agency"
[API Complete]   3. undefined: "Email Newsletters, Blog Posts"
[API Complete]   4. undefined: "65"
[API Complete]   5. undefined: "warm"
[API Complete]   6. undefined: "2025-07-30T18:42:30.776Z"
[API Complete]   7. undefined: "GoHighLevel, Zapier"
[API Complete] Using minimal tags: [ 'web-lead', 'get-started-form' ]
[API Complete] Sending comprehensive payload to GHL: {
  name: 'Minimal Fields Test',
  email: 'minimal.fields.1753900950565@example.com',
  companyName: 'Minimal Fields Test Co',
  source: 'TrueFlow Get Started Form (Complete)',
  tagsCount: 2,
  customFieldsCount: 7,
  payloadSize: 781
}
[API Complete] Contact created/updated successfully: { contactId: 'plwj3jkbY1SFsdmXL5ef', hasContact: true, hasId: false }
[API Complete] Sending backup email notification...
[Email] Sending get-started notification...
[API Complete] Backup email failed: Error: Unable to connect to Resend API
    at sendGetStartedNotification (webpack-internal:///(rsc)/./lib/email/resend-notifications.ts:191:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async POST (webpack-internal:///(rsc)/./app/api/ghl/create-lead-complete/route.ts:206:17)
    at async /Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/start-server.js:141:13)
[API Complete] ===== COMPLETE FIELD MAPPING SUCCESSFUL =====
 POST /api/ghl/create-lead-complete 200 in 3128ms
 ✓ Compiled in 13ms
 ✓ Compiled /api/ghl/create-lead-complete in 80ms (114 modules)
[API Complete] ===== NEW COMPLETE FIELD MAPPING REQUEST =====
[API Complete] Starting comprehensive field mapping process...
[API Complete] Form data received: {
  firstName: 'Complete',
  lastName: 'Field Structure',
  email: 'complete.fields.1753901181493@example.com',
  businessName: 'Complete Field Test Company',
  businessType: 'Coach/Consultant',
  teamSize: '',
  monthlyLeads: '',
  currentTools: [],
  biggestChallenge: '',
  contentGoals: [ 'Email Newsletters', 'Blog Posts', 'Social Media Content' ],
  selectedPlan: '',
  additionalNotes: '',
  formFieldCount: 24
}
[API Complete] Detected form type: assessment
[API Complete] Lead score: 50, quality: warm
[API Complete] Ensuring all form fields exist in GoHighLevel...
[Field Setup] Ensuring all Get Started form fields exist in GHL...
[Field Setup] Found 86 existing custom fields
[Field Setup] ❌ Field missing: Current Content Creation Method, creating...
[Field Creation] Creating custom field: Current Content Creation Method
[Field Creation] Failed to create field Current Content Creation Method: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"0ca67b5c-0f07-462d-b9fa-8d0eda654092"}
[Field Setup] ❌ Field missing: Monthly Content Volume, creating...
[Field Creation] Creating custom field: Monthly Content Volume
[Field Creation] Failed to create field Monthly Content Volume: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"1b5fac7a-3e61-48a1-b085-53e1a1272dd3"}
[Field Setup] ❌ Field missing: CRM Usage Level, creating...
[Field Creation] Creating custom field: CRM Usage Level
[Field Creation] Failed to create field CRM Usage Level: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"8ae16b62-62d0-4b95-8398-4116d605b38b"}
[Field Setup] ✅ Field exists: Lead Response Time (contact.trueflow_lead_response)
[Field Setup] ❌ Field missing: Weekly Time on Repetitive Tasks, creating...
[Field Creation] Creating custom field: Weekly Time on Repetitive Tasks
[Field Creation] Failed to create field Weekly Time on Repetitive Tasks: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"cc84c421-df2f-449d-991e-3e008739e66d"}
[Field Setup] ❌ Field missing: Monthly Budget Range, creating...
[Field Creation] Creating custom field: Monthly Budget Range
[Field Creation] Failed to create field Monthly Budget Range: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"8c23dc4c-dbd4-4160-913e-5e71d7436ba0"}
[Field Setup] ✅ Field exists: How many team/staff members do you have? (contact.how_many_team_staff_members_do_you_have)
[Field Setup] ✅ Field exists: Estimated total number of new leads per month (contact.estimated_total_number_of_new_leads_per_month)
[Field Setup] ✅ Field exists: Which of the following do you currently use? (contact.which_of_the_following_do_you_currently_use)
[Field Setup] ✅ Field exists: Where are you still experiencing friction? (Choose your biggest challenge or type your own.) (contact.where_are_you_still_experiencing_friction_choose_your_biggest_challenge_or_type_your_own)
[Field Setup] ❌ Field missing: Current revenue range? (We don't need exact numbers—just a ballpark.), creating...
[Field Creation] Creating custom field: Current revenue range? (We don't need exact numbers—just a ballpark.)
[Field Creation] Failed to create field Current revenue range? (We don't need exact numbers—just a ballpark.): {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"30b7821c-de5e-41ee-a44b-c7f769016dd9"}
[Field Setup] ✅ Field exists: What are your goals? (contact.what_are_your_goals)
[Field Setup] ❌ Field missing: Current Systems, creating...
[Field Creation] Creating custom field: Current Systems
[Field Creation] Failed to create field Current Systems: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"f89ffb90-de32-4720-98b8-16a02bf65358"}
[Field Setup] ❌ Field missing: Lead Sources, creating...
[Field Creation] Creating custom field: Lead Sources
[Field Creation] Failed to create field Lead Sources: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"32d307f7-d123-4cdb-b9dc-34137d1fbffd"}
[Field Setup] ✅ Field exists: Integration Preferences (contact.trueflow_integrations)
[Field Setup] ✅ Field exists: Additional Notes (contact.additional_notes)
[Field Setup] ❌ Field missing: How Did You Hear About Us, creating...
[Field Creation] Creating custom field: How Did You Hear About Us
[Field Creation] Failed to create field How Did You Hear About Us: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"43715e5d-ea2f-4208-8d23-75160ff9e401"}
[Field Setup] ❌ Field missing: Urgency Level, creating...
[Field Creation] Creating custom field: Urgency Level
[Field Creation] Failed to create field Urgency Level: {"message":["options must contain at least 1 elements","options must be an array","options should not be empty"],"error":"Unprocessable Entity","statusCode":422,"traceId":"9b9064b8-4866-4dc7-9d5f-b5c3d1ebe091"}
[Field Setup] ✅ Field exists: Assessment Total Score (contact.assessment_total_score)
[Field Setup] ✅ Field exists: Assessment Score Percentage (contact.assessment_score_percentage)
[Field Setup] ❌ Field missing: AI Readiness Level, creating...
[Field Creation] Creating custom field: AI Readiness Level
[Field Creation] Failed to create field AI Readiness Level: {"message":"contact.ai_readiness_level already exists. Please input a different name or fieldKey.","error":"Bad Request","statusCode":400,"traceId":"84f206c3-0a51-4d58-bc9d-6d4cf9d49e9b"}
[Field Setup] ✅ Field exists: AI Recommendation (contact.ai_recommendation)
[Field Setup] Field setup complete. Total fields mapped: 97
[API Complete] Field mapping complete. Available fields: 97
[API Complete] Building comprehensive custom fields payload...
[Complete Mapping] Building complete custom fields payload...
[Complete Mapping] ✅ Mapped businessName: Complete Field Test Company
[Complete Mapping] ✅ Mapped businessType: Coach/Consultant
[Complete Mapping] ✅ Mapped contentGoals: Email Newsletters, Blog Posts, Social Media Conten
[Complete Mapping] ✅ Mapped selectedPlan: (empty)
[Complete Mapping] ✅ Mapped leadScore: 50
[Complete Mapping] ✅ Mapped leadQuality: warm
[Complete Mapping] ✅ Mapped formType: (empty)
[Complete Mapping] ✅ Mapped submissionDate: 2025-07-30T18:46:21.651Z
[Complete Mapping] ✅ Mapped teamSize (How many team/staff members do you have?): (empty)
[Complete Mapping] ✅ Mapped monthlyLeads (Estimated total number of new leads per month): (empty)
[Complete Mapping] ✅ Mapped currentTools (Which of the following do you currently use?): (empty)
[Complete Mapping] ✅ Mapped biggestChallenge (Where are you still experiencing friction? (Choose your biggest challenge or type your own.)): (empty)
[Complete Mapping] ❌ Field not found for revenueRange (Current revenue range? (We don't need exact numbers—just a ballpark.))
[Complete Mapping] ✅ Mapped businessGoals (What are your goals?): (empty)
[Complete Mapping] ❌ Field not found for currentSystems (Current Systems)
[Complete Mapping] ❌ Field not found for leadSources (Lead Sources)
[Complete Mapping] ✅ Mapped integrations (Integration Preferences): GoHighLevel, Mailchimp
[Complete Mapping] ✅ Mapped additionalNotes (Additional Notes): (empty)
[Complete Mapping] ❌ Field not found for hearAboutUs (How Did You Hear About Us)
[Complete Mapping] ❌ Field not found for urgencyLevel (Urgency Level)
[Complete Mapping] ✅ Mapped totalScore (Assessment Total Score): (empty)
[Complete Mapping] ✅ Mapped scorePercentage (Assessment Score Percentage): (empty)
[Complete Mapping] ❌ Field not found for readinessLevel (AI Readiness Level)
[Complete Mapping] ✅ Mapped recommendation (AI Recommendation): (empty)
[Complete Mapping] Total custom fields mapped: 18
[API Complete] Built 18 custom field mappings
[API Complete] Custom fields being sent to GHL:
[API Complete]   1. undefined: "Complete Field Test Company"
[API Complete]   2. undefined: "Coach/Consultant"
[API Complete]   3. undefined: "Email Newsletters, Blog Posts, Social Media Content"
[API Complete]   4. undefined: ""
[API Complete]   5. undefined: "50"
[API Complete]   6. undefined: "warm"
[API Complete]   7. undefined: ""
[API Complete]   8. undefined: "2025-07-30T18:46:21.651Z"
[API Complete]   9. undefined: ""
[API Complete]   10. undefined: ""
[API Complete]   11. undefined: ""
[API Complete]   12. undefined: ""
[API Complete]   13. undefined: ""
[API Complete]   14. undefined: "GoHighLevel, Mailchimp"
[API Complete]   15. undefined: ""
[API Complete]   16. undefined: ""
[API Complete]   17. undefined: ""
[API Complete]   18. undefined: ""
[API Complete] Using minimal tags: [ 'web-lead', 'assessment-form' ]
[API Complete] Sending comprehensive payload to GHL: {
  name: 'Complete Field Structure',
  email: 'complete.fields.1753901181493@example.com',
  companyName: 'Complete Field Test Company',
  source: 'TrueFlow Assessment Form (Complete)',
  tagsCount: 2,
  customFieldsCount: 18,
  payloadSize: 1364
}
[API Complete] Contact created/updated successfully: { contactId: 'llR5gifKc9goB3z7QF0i', hasContact: true, hasId: false }
[API Complete] Sending backup email notification...
[Email] Sending assessment notification...
[API Complete] Backup email failed: Error: Unable to connect to Resend API
    at sendAssessmentNotification (webpack-internal:///(rsc)/./lib/email/resend-notifications.ts:36:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async POST (webpack-internal:///(rsc)/./app/api/ghl/create-lead-complete/route.ts:204:17)
    at async /Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/base-server.js:818:17)
    at async /Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/Users/griffinrutherford/Documents/TrueFlow AI MVP/trueflow-landing-repo/node_modules/next/dist/server/lib/start-server.js:141:13)
[API Complete] ===== COMPLETE FIELD MAPPING SUCCESSFUL =====
 POST /api/ghl/create-lead-complete 200 in 3999ms
[?25h
